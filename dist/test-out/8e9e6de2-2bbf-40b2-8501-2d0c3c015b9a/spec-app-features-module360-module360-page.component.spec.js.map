{
  "version": 3,
  "sources": ["angular:jit:template:src/app/features/module360/module360-page.component.html", "angular:jit:style:src/app/features/module360/module360-page.component.css", "src/app/features/module360/module360-page.component.ts", "src/app/features/module360/module360-page.component.spec.ts"],
  "sourcesContent": ["<div class=\"module360-container container\">\n  <button class=\"back-btn\" (click)=\"goBack()\">\n    <span class=\"back-icon\">\u2190</span> Back to Courses\n  </button>\n  <div class=\"hero-section\">\n    <h1>360\u00B0 VR Modules</h1>\n    <p>Immersive English learning scenarios in virtual reality</p>\n  </div>\n\n  <!-- Module Selection Grid -->\n  <div class=\"modules-grid\">\n    <div \n      *ngFor=\"let module of modules\" \n      class=\"module-card\"\n      [class.selected]=\"selectedModule?.id === module.id\"\n      (click)=\"selectModule(module)\"\n      (keydown.enter)=\"selectModule(module)\"\n      (keydown.space)=\"selectModule(module)\"\n      tabindex=\"0\"\n      role=\"button\"\n      [attr.aria-label]=\"'Select ' + module.title + ' module'\"\n    >\n      <div class=\"module-thumbnail\">\n        <img [src]=\"module.thumbnail\" [alt]=\"module.title + ' thumbnail'\" loading=\"lazy\">\n        <div class=\"module-overlay\">\n          <span class=\"duration\">{{ module.duration }}</span>\n          <span class=\"difficulty\" [style.background-color]=\"getDifficultyColor(module.difficulty)\">\n            {{ module.difficulty }}\n          </span>\n        </div>\n      </div>\n      <div class=\"module-info\">\n        <h3>{{ module.title }}</h3>\n        <p>{{ module.description }}</p>\n      </div>\n    </div>\n  </div>\n\n  <!-- 360 Viewer Section -->\n  <div class=\"viewer-section\" *ngIf=\"selectedModule\">\n    <div class=\"viewer-header\">\n      <h2>{{ selectedModule.title }}</h2>\n      <p>{{ selectedModule.description }}</p>\n    </div>\n    \n    <div class=\"viewer-wrapper\">\n      <div \n        #viewer360 \n        class=\"viewer-360\"\n        [class.loading]=\"isLoading\"\n        role=\"region\"\n        aria-label=\"360 degree video player\"\n      >\n        <div class=\"loading-spinner\" *ngIf=\"isLoading\">\n          <div class=\"spinner\"></div>\n          <p>Loading 360\u00B0 experience...</p>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"viewer-controls\">\n      <div class=\"instruction\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n          <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"></line>\n          <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\"></line>\n        </svg>\n        <span>Click and drag to look around. Use fullscreen for best VR experience.</span>\n      </div>\n    </div>\n  </div>\n\n  <!-- Empty State -->\n  <div class=\"empty-state\" *ngIf=\"!selectedModule\">\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"64\" height=\"64\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n      <path d=\"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2z\"></path>\n      <path d=\"M12 6v6l4 2\"></path>\n    </svg>\n    <h3>Select a 360\u00B0 module to begin</h3>\n    <p>Choose from our immersive English learning scenarios above</p>\n  </div>\n</div>\n", "/* src/app/features/module360/module360-page.component.css */\n.module360-container {\n  padding: 2rem 1rem;\n  min-height: 100vh;\n}\n.hero-section {\n  text-align: center;\n  margin-bottom: 3rem;\n}\n.hero-section h1 {\n  font-size: 2.5rem;\n  font-weight: 700;\n  color: var(--text);\n  margin-bottom: 0.5rem;\n}\n.hero-section p {\n  font-size: 1.125rem;\n  color: var(--muted);\n}\n.modules-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 1.5rem;\n  margin-bottom: 3rem;\n}\n.module-card {\n  background: var(--surface);\n  border: 2px solid transparent;\n  border-radius: 12px;\n  overflow: hidden;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.module-card:hover,\n.module-card:focus {\n  border-color: var(--brand-primary);\n  transform: translateY(-4px);\n  outline: none;\n}\n.module-card.selected {\n  border-color: var(--brand-accent);\n  box-shadow: 0 8px 24px rgba(0, 194, 138, 0.2);\n}\n.module-thumbnail {\n  position: relative;\n  width: 100%;\n  padding-top: 56.25%;\n  overflow: hidden;\n}\n.module-thumbnail img {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n.module-overlay {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding: 1rem;\n  background:\n    linear-gradient(\n      to top,\n      rgba(0, 0, 0, 0.8),\n      transparent);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.duration {\n  color: white;\n  font-size: 0.875rem;\n  font-weight: 600;\n}\n.difficulty {\n  padding: 0.25rem 0.75rem;\n  border-radius: 20px;\n  color: white;\n  font-size: 0.75rem;\n  font-weight: 600;\n  text-transform: capitalize;\n}\n.module-info {\n  padding: 1.25rem;\n}\n.module-info h3 {\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: var(--text);\n  margin-bottom: 0.5rem;\n}\n.module-info p {\n  font-size: 0.875rem;\n  color: var(--muted);\n  line-height: 1.5;\n}\n.viewer-section {\n  margin-top: 3rem;\n}\n.viewer-header {\n  text-align: center;\n  margin-bottom: 2rem;\n}\n.viewer-header h2 {\n  font-size: 2rem;\n  font-weight: 600;\n  color: var(--text);\n  margin-bottom: 0.5rem;\n}\n.viewer-header p {\n  color: var(--muted);\n}\n.viewer-wrapper {\n  background: var(--surface);\n  border-radius: 16px;\n  padding: 1rem;\n  margin-bottom: 1.5rem;\n}\n.viewer-360 {\n  position: relative;\n  width: 100%;\n  height: 600px;\n  background: #000;\n  border-radius: 12px;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.viewer-360 iframe {\n  width: 100%;\n  height: 100%;\n}\n.loading-spinner {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n}\n.spinner {\n  width: 48px;\n  height: 48px;\n  border: 4px solid rgba(11, 110, 255, 0.2);\n  border-top-color: var(--brand-primary);\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n.loading-spinner p {\n  color: var(--muted);\n  font-size: 0.875rem;\n}\n.viewer-controls {\n  display: flex;\n  justify-content: center;\n  padding: 1rem;\n}\n.instruction {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 1rem 1.5rem;\n  background: rgba(11, 110, 255, 0.1);\n  border-radius: 8px;\n  color: var(--brand-primary);\n}\n.instruction svg {\n  flex-shrink: 0;\n}\n.instruction span {\n  font-size: 0.875rem;\n}\n.empty-state {\n  text-align: center;\n  padding: 4rem 2rem;\n  color: var(--muted);\n}\n.empty-state svg {\n  margin: 0 auto 1.5rem;\n  opacity: 0.5;\n}\n.empty-state h3 {\n  font-size: 1.5rem;\n  color: var(--text);\n  margin-bottom: 0.5rem;\n}\n@media (max-width: 768px) {\n  .hero-section h1 {\n    font-size: 2rem;\n  }\n  .modules-grid {\n    grid-template-columns: 1fr;\n  }\n  .viewer-360 {\n    height: 400px;\n  }\n  .instruction {\n    flex-direction: column;\n    text-align: center;\n  }\n}\n/*# sourceMappingURL=module360-page.component.css.map */\n", "import { Component, OnInit, AfterViewInit, OnDestroy, PLATFORM_ID, Inject, ElementRef, ViewChild } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { Router } from '@angular/router';\n\ninterface Module360 {\n  id: string;\n  title: string;\n  description: string;\n  videoId: string;\n  thumbnail: string;\n  duration: string;\n  difficulty: 'beginner' | 'intermediate' | 'advanced';\n}\n\n@Component({ \n  selector: 'app-module360-page', \n  templateUrl: './module360-page.component.html', \n  styleUrls: ['./module360-page.component.css'],\n  standalone: false\n})\nexport class Module360PageComponent implements OnInit, AfterViewInit, OnDestroy {\n  @ViewChild('viewer360', { static: false }) viewer360Ref!: ElementRef<HTMLDivElement>;\n  \n  modules: Module360[] = [];\n  selectedModule: Module360 | null = null;\n  isLoading = false;\n  viewerInitialized = false;\n  \n  // Panolens/Three.js instances\n  private viewer: any;\n  private panorama: any;\n  \n  constructor(\n    @Inject(PLATFORM_ID) private platformId: Object,\n    private router: Router\n  ) {}\n\n  goBack(): void {\n    this.router.navigate(['/courses']);\n  }\n\n  ngOnInit(): void {\n    // Load 360 modules from mock data\n    this.loadModules();\n  }\n\n  ngAfterViewInit(): void {\n    // Initialize viewer only in browser environment\n    if (isPlatformBrowser(this.platformId) && this.modules.length > 0) {\n      // Auto-select first module\n      this.selectModule(this.modules[0]);\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.cleanup360Viewer();\n  }\n\n  private loadModules(): void {\n    // Mock 360 modules with YouTube 360 video IDs\n    this.modules = [\n      {\n        id: '1',\n        title: 'Airport Scenario',\n        description: 'Practice English at the airport - Check-in, Security, and Boarding',\n        videoId: 'IArd6ZadFJ4',\n        thumbnail: 'https://img.youtube.com/vi/IArd6ZadFJ4/maxresdefault.jpg',\n        duration: '5:30',\n        difficulty: 'beginner'\n      },\n      {\n        id: '2',\n        title: 'Restaurant Experience',\n        description: 'Learn restaurant vocabulary and ordering food in English',\n        videoId: 'yRM4wsXQ5KI',\n        thumbnail: 'https://img.youtube.com/vi/yRM4wsXQ5KI/maxresdefault.jpg',\n        duration: '6:15',\n        difficulty: 'intermediate'\n      },\n      {\n        id: '3',\n        title: 'Business Meeting',\n        description: 'Professional English in a corporate environment',\n        videoId: '_ldiu5OiA9g',\n        thumbnail: 'https://img.youtube.com/vi/_ldiu5OiA9g/maxresdefault.jpg',\n        duration: '7:45',\n        difficulty: 'advanced'\n      }\n    ];\n  }\n\n  selectModule(module: Module360): void {\n    if (this.selectedModule?.id === module.id) return;\n    \n    this.selectedModule = module;\n    this.isLoading = true;\n    \n    // Cleanup previous viewer\n    this.cleanup360Viewer();\n    \n    // Initialize new viewer with selected module\n    if (isPlatformBrowser(this.platformId)) {\n      setTimeout(() => this.init360Viewer(), 100);\n    }\n  }\n\n  private async init360Viewer(): Promise<void> {\n    if (!this.viewer360Ref) return;\n\n    try {\n      // Dynamically import Panolens and Three.js (code splitting)\n      const [PANOLENS, THREE] = await Promise.all([\n        import('panolens'),\n        import('three')\n      ]);\n\n      const container = this.viewer360Ref.nativeElement;\n      \n      // Create viewer\n      this.viewer = new PANOLENS.Viewer({\n        container: container,\n        controlBar: true,\n        autoRotate: true,\n        autoRotateSpeed: 0.3,\n        output: 'console'\n      });\n\n      // Create 360 video panorama using YouTube video\n      // Note: YouTube doesn't allow direct embedding of 360 videos in Panolens\n      // We'll use YouTube iframe API instead\n      this.initYouTube360Player();\n      \n      this.viewerInitialized = true;\n      this.isLoading = false;\n    } catch (error) {\n      console.error('Error initializing 360 viewer:', error);\n      // Fallback to YouTube iframe\n      this.initYouTube360Player();\n      this.isLoading = false;\n    }\n  }\n\n  private initYouTube360Player(): void {\n    if (!this.viewer360Ref || !this.selectedModule) return;\n\n    const container = this.viewer360Ref.nativeElement;\n    container.innerHTML = `\n      <iframe\n        width=\"100%\"\n        height=\"100%\"\n        src=\"https://www.youtube.com/embed/${this.selectedModule.videoId}?autoplay=0&rel=0&modestbranding=1\"\n        title=\"${this.selectedModule.title}\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n        allowfullscreen\n        style=\"border-radius: 12px;\"\n      ></iframe>\n    `;\n  }\n\n  private cleanup360Viewer(): void {\n    if (this.viewer) {\n      this.viewer.dispose();\n      this.viewer = null;\n    }\n    if (this.panorama) {\n      this.panorama.dispose();\n      this.panorama = null;\n    }\n    this.viewerInitialized = false;\n  }\n\n  getDifficultyColor(difficulty: string): string {\n    const colors = {\n      'beginner': '#00C28A',\n      'intermediate': '#FFB800',\n      'advanced': '#FF6B6B'\n    };\n    return colors[difficulty as keyof typeof colors] || '#9aa6b2';\n  }\n}\n", "import { ComponentFixture, TestBed } from '@angular/core/testing';\nimport { provideZonelessChangeDetection, PLATFORM_ID } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Module360PageComponent } from './module360-page.component';\n\ndescribe('Module360PageComponent', () => {\n  let component: Module360PageComponent;\n  let fixture: ComponentFixture<Module360PageComponent>;\n  let mockRouter: jasmine.SpyObj<Router>;\n\n  beforeEach(async () => {\n    mockRouter = jasmine.createSpyObj('Router', ['navigate']);\n\n    await TestBed.configureTestingModule({\n      declarations: [Module360PageComponent],\n      providers: [\n        provideZonelessChangeDetection(),\n        { provide: Router, useValue: mockRouter },\n        { provide: PLATFORM_ID, useValue: 'browser' }\n      ]\n    }).compileComponents();\n\n    fixture = TestBed.createComponent(Module360PageComponent);\n    component = fixture.componentInstance;\n    // Don't call detectChanges in beforeEach to avoid ExpressionChangedAfterItHasBeenCheckedError\n  });\n\n  it('should create', () => {\n    expect(component).toBeTruthy();\n  });\n\n  it('should initialize with modules data', () => {\n    expect(component.modules).toBeDefined();\n    expect(Array.isArray(component.modules)).toBe(true);\n  });\n});"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAA;AAAA,IAAAC,iCAAA;AAAA;AAAA,IAAAD,oCAAA;AAAA;AAAA;;;ICoBa;;;;;;;AApBb;AACA;AACA;AAkBO,IAAM,yBAAN,MAAME,wBAAsB;MAaF;MACrB;MAbiC;MAE3C,UAAuB,CAAA;MACvB,iBAAmC;MACnC,YAAY;MACZ,oBAAoB;;MAGZ;MACA;MAER,YAC+B,YACrB,QAAc;AADO,aAAA,aAAA;AACrB,aAAA,SAAA;MACP;MAEH,SAAM;AACJ,aAAK,OAAO,SAAS,CAAC,UAAU,CAAC;MACnC;MAEA,WAAQ;AAEN,aAAK,YAAW;MAClB;MAEA,kBAAe;AAEb,YAAI,kBAAkB,KAAK,UAAU,KAAK,KAAK,QAAQ,SAAS,GAAG;AAEjE,eAAK,aAAa,KAAK,QAAQ,CAAC,CAAC;QACnC;MACF;MAEA,cAAW;AACT,aAAK,iBAAgB;MACvB;MAEQ,cAAW;AAEjB,aAAK,UAAU;UACb;YACE,IAAI;YACJ,OAAO;YACP,aAAa;YACb,SAAS;YACT,WAAW;YACX,UAAU;YACV,YAAY;;UAEd;YACE,IAAI;YACJ,OAAO;YACP,aAAa;YACb,SAAS;YACT,WAAW;YACX,UAAU;YACV,YAAY;;UAEd;YACE,IAAI;YACJ,OAAO;YACP,aAAa;YACb,SAAS;YACT,WAAW;YACX,UAAU;YACV,YAAY;;;MAGlB;MAEA,aAAa,QAAiB;AAC5B,YAAI,KAAK,gBAAgB,OAAO,OAAO;AAAI;AAE3C,aAAK,iBAAiB;AACtB,aAAK,YAAY;AAGjB,aAAK,iBAAgB;AAGrB,YAAI,kBAAkB,KAAK,UAAU,GAAG;AACtC,qBAAW,MAAM,KAAK,cAAa,GAAI,GAAG;QAC5C;MACF;MAEc,gBAAa;;AACzB,cAAI,CAAC,KAAK;AAAc;AAExB,cAAI;AAEF,kBAAM,CAAC,UAAU,KAAK,IAAI,MAAM,QAAQ,IAAI;cAC1C,OAAO,qBAAU;cACjB,OAAO,qBAAO;aACf;AAED,kBAAM,YAAY,KAAK,aAAa;AAGpC,iBAAK,SAAS,IAAI,SAAS,OAAO;cAChC;cACA,YAAY;cACZ,YAAY;cACZ,iBAAiB;cACjB,QAAQ;aACT;AAKD,iBAAK,qBAAoB;AAEzB,iBAAK,oBAAoB;AACzB,iBAAK,YAAY;UACnB,SAAS,OAAO;AACd,oBAAQ,MAAM,kCAAkC,KAAK;AAErD,iBAAK,qBAAoB;AACzB,iBAAK,YAAY;UACnB;QACF;;MAEQ,uBAAoB;AAC1B,YAAI,CAAC,KAAK,gBAAgB,CAAC,KAAK;AAAgB;AAEhD,cAAM,YAAY,KAAK,aAAa;AACpC,kBAAU,YAAY;;;;6CAImB,KAAK,eAAe,OAAO;iBACvD,KAAK,eAAe,KAAK;;;;;;;MAOxC;MAEQ,mBAAgB;AACtB,YAAI,KAAK,QAAQ;AACf,eAAK,OAAO,QAAO;AACnB,eAAK,SAAS;QAChB;AACA,YAAI,KAAK,UAAU;AACjB,eAAK,SAAS,QAAO;AACrB,eAAK,WAAW;QAClB;AACA,aAAK,oBAAoB;MAC3B;MAEA,mBAAmB,YAAkB;AACnC,cAAM,SAAS;UACb,YAAY;UACZ,gBAAgB;UAChB,YAAY;;AAEd,eAAO,OAAO,UAAiC,KAAK;MACtD;;6CAlJG,QAAM,MAAA,CAAC,WAAW,EAAA,CAAA,EAAA;;;;+BAZpB,WAAS,MAAA,CAAC,aAAa,EAAE,QAAQ,MAAK,CAAE,EAAA,CAAA;;;AAD9B,6BAAsB,WAAA;MANlC,UAAU;QACT,UAAU;QACV,UAAA;QAEA,YAAY;;OACb;OACY,sBAAsB;;;;;ACpBnC;;;AACA;AACA;AACA,IAAAC;AAEA,aAAS,0BAA0B,MAAK;AACtC,UAAI;AACJ,UAAI;AACJ,UAAI;AAEJ,iBAAW,MAAW;AACpB,qBAAa,QAAQ,aAAa,UAAU,CAAC,UAAU,CAAC;AAExD,cAAM,QAAQ,uBAAuB;UACnC,cAAc,CAAC,sBAAsB;UACrC,WAAW;YACT,+BAA8B;YAC9B,EAAE,SAAS,QAAQ,UAAU,WAAU;YACvC,EAAE,SAAS,aAAa,UAAU,UAAS;;SAE9C,EAAE,kBAAiB;AAEpB,kBAAU,QAAQ,gBAAgB,sBAAsB;AACxD,oBAAY,QAAQ;MAEtB,EAAC;AAED,SAAG,iBAAiB,MAAK;AACvB,eAAO,SAAS,EAAE,WAAU;MAC9B,CAAC;AAED,SAAG,uCAAuC,MAAK;AAC7C,eAAO,UAAU,OAAO,EAAE,YAAW;AACrC,eAAO,MAAM,QAAQ,UAAU,OAAO,CAAC,EAAE,KAAK,IAAI;MACpD,CAAC;IACH,CAAC;;;",
  "names": ["module360_page_component_default", "init_module360_page_component", "Module360PageComponent", "init_module360_page_component"]
}
